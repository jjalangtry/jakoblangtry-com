---
import siteConfig from "../../public/data/site-config.json";
import projectsRaw from "../../public/data/projects.json";

// Flatten grouped projects into a single array for the terminal
const allProjects = [
  ...(projectsRaw.featured ?? []),
  ...(projectsRaw.contributions ?? []),
  ...(projectsRaw.github ?? []),
].filter((p) => p && p.name && p.url);

const terminalData = JSON.stringify({ siteConfig, projects: allProjects });
---

<section
  class="terminal"
  id="main-terminal"
  aria-label="Terminal interface"
  tabindex="-1"
>
  <p id="terminal-help-hint" class="sr-only">
    Type commands such as help, projects, resume, or theme and press Enter.
  </p>
  <div
    id="cli-output"
    class="terminal-output"
    aria-live="polite"
    aria-atomic="false"
  >
  </div>
</section>

<script type="application/json" id="terminal-data" set:html={terminalData} />

<script>
  import "../scripts/terminal.js";
</script>
